import{_ as s,o as a,g as n,Q as l}from"./chunks/framework.4c5231b1.js";const u=JSON.parse('{"title":"ä¿®æ”¹ node_modules ä¸­çš„ä¾èµ–ï¼ˆæ‰“è¡¥ä¸ï¼‰","description":"","frontmatter":{},"headers":[],"relativePath":"daily-notes/issue-42.md","filePath":"daily-notes/issue-42.md","lastUpdated":null}'),p={name:"daily-notes/issue-42.md"},e=l(`<h1 id="ä¿®æ”¹-node-modules-ä¸­çš„ä¾èµ–-æ‰“è¡¥ä¸" tabindex="-1">ä¿®æ”¹ <code>node_modules</code> ä¸­çš„ä¾èµ–ï¼ˆæ‰“è¡¥ä¸ï¼‰ <a class="header-anchor" href="#ä¿®æ”¹-node-modules-ä¸­çš„ä¾èµ–-æ‰“è¡¥ä¸" aria-label="Permalink to &quot;ä¿®æ”¹ \`node_modules\` ä¸­çš„ä¾èµ–ï¼ˆæ‰“è¡¥ä¸ï¼‰&quot;">â€‹</a></h1><div class="tip custom-block"><p class="custom-block-title">åŸæ–‡åœ°å€</p><p><a href="https://github.com/maomao1996/daily-notes/issues/42" target="_blank" rel="noreferrer">ä¿®æ”¹ node_modules ä¸­çš„ä¾èµ–ï¼ˆæ‰“è¡¥ä¸ï¼‰ | GitHub</a></p></div><blockquote><p>ä¸ºä»€ä¹ˆè¦ä¿®æ”¹ <code>node_modules</code> ä¸­çš„ä¾èµ–ï¼Ÿ</p></blockquote><ol><li>ä¾èµ–åŒ…æœ‰ <code>bug</code>ï¼Œä½†ä½œè€…æ²¡æœ‰åŠæ—¶ä¿®å¤</li><li>ä¾èµ–åŒ…çš„ç‰ˆæœ¬è¿‡æ—§ï¼Œä½†ä¸èƒ½å‡çº§åˆ°æ–°ç‰ˆæœ¬</li><li>å¯¹ä¾èµ–åŒ…çš„åŠŸèƒ½æœ‰å®šåˆ¶åŒ–éœ€æ±‚æ—¶</li></ol><h2 id="å¸¸è§åšæ³•" tabindex="-1">å¸¸è§åšæ³• <a class="header-anchor" href="#å¸¸è§åšæ³•" aria-label="Permalink to &quot;å¸¸è§åšæ³•&quot;">â€‹</a></h2><ul><li>è‡ªå·±ç»´æŠ¤è¿™ä¸ª <code>npm</code> åŒ… <ul><li>ç»´æŠ¤æˆæœ¬è¾ƒé«˜ï¼Œå‘¨æœŸé•¿</li></ul></li><li>ç›´æ¥ä¿®æ”¹ <code>node_modules</code> ä¸­çš„ä¾èµ– <ul><li>é€‚åˆåº”æ€¥ï¼Œå‘¨æœŸçŸ­</li><li>ä¿®æ”¹åªåœ¨æœ¬åœ°ç”Ÿæ•ˆ</li><li>é€‚åˆå¯¹ <code>npm</code> åŒ…çš„ä¿®æ”¹ä¸éœ€è¦å‘å¸ƒçš„æƒ…å†µ</li></ul></li><li>å¯¹ <code>node_modules</code> ä¸­çš„ä¾èµ–æ‰“è¡¥ä¸ <ul><li>é€‚åˆåº”æ€¥ï¼Œå‘¨æœŸçŸ­</li><li>æäº¤è¡¥ä¸æ–‡ä»¶åä¿®æ”¹å¯åœ¨æœ¬åœ°å’Œè¿œç¨‹ç”Ÿæ•ˆ</li><li>é€‚åˆå¯¹ <code>npm</code> åŒ…çš„ä¿®æ”¹ä¸éœ€è¦å‘å¸ƒçš„æƒ…å†µ</li></ul></li></ul><h2 id="ä»€ä¹ˆæ˜¯æ‰“è¡¥ä¸" tabindex="-1">ä»€ä¹ˆæ˜¯æ‰“è¡¥ä¸ï¼Ÿ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯æ‰“è¡¥ä¸" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯æ‰“è¡¥ä¸ï¼Ÿ&quot;">â€‹</a></h2><p>æ‰“è¡¥ä¸æ˜¯ä¸€ç§åœ¨ä¸ä¿®æ”¹åŸå§‹æ–‡ä»¶çš„æƒ…å†µä¸‹å¯¹æ–‡ä»¶è¿›è¡Œå¢é‡ä¿®æ”¹çš„æŠ€æœ¯ï¼Œå®ƒå¯ä»¥ç”¨æ¥ä¿®å¤ <code>bug</code>ã€æ·»åŠ åŠŸèƒ½ã€æˆ–è€…æ”¹å˜è¡Œä¸ºã€‚</p><p>æ‰“è¡¥ä¸çš„åŸç†æ˜¯ä½¿ç”¨ <code>diff</code> å·¥å…·æ¥æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶ï¼ˆæˆ–ç›®å½•ï¼‰ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªè¡¥ä¸æ–‡ä»¶ï¼ˆpatch fileï¼‰ï¼Œè¿™ä¸ªè¡¥ä¸æ–‡ä»¶è®°å½•äº†å¦‚ä½•ä»ä¸€ä¸ªæ–‡ä»¶ï¼ˆæˆ–ç›®å½•ï¼‰å˜æˆå¦ä¸€ä¸ªæ–‡ä»¶ï¼ˆæˆ–ç›®å½•ï¼‰æ‰€éœ€è¦åšçš„ä¿®æ”¹ï¼Œç„¶åä½¿ç”¨ <code>patch</code> å·¥å…·æ¥å°†è¡¥ä¸æ–‡ä»¶åº”ç”¨åˆ°åŸå§‹æ–‡ä»¶ï¼ˆæˆ–ç›®å½•ï¼‰ä¸Šï¼Œä»è€Œå®ç°ä¿®æ”¹ã€‚</p><p>æ‰“è¡¥ä¸æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li>è¡¥ä¸æ–‡ä»¶é€šå¸¸å¾ˆå°ï¼Œå¯ä»¥èŠ‚çœç£ç›˜ç©ºé—´å’Œç½‘ç»œå¸¦å®½</li><li>è¡¥ä¸æ–‡ä»¶å¯ä»¥è¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œæ–¹ä¾¿è¿½è¸ªå’Œç®¡ç†</li><li>è¡¥ä¸æ–‡ä»¶å¯ä»¥åœ¨ä¸åŒçš„å¹³å°å’Œç¯å¢ƒä¸­ä½¿ç”¨ï¼Œæé«˜å…¼å®¹æ€§å’Œå¯ç§»æ¤æ€§</li><li>è¡¥ä¸æ–‡ä»¶å¯ä»¥åœ¨å®‰è£…æˆ–æ›´æ–°ä¾èµ–åŒ…åè‡ªåŠ¨åº”ç”¨ï¼Œå‡å°‘æ‰‹åŠ¨æ“ä½œ</li></ul><h2 id="å¦‚ä½•æ‰“è¡¥ä¸" tabindex="-1">å¦‚ä½•æ‰“è¡¥ä¸ <a class="header-anchor" href="#å¦‚ä½•æ‰“è¡¥ä¸" aria-label="Permalink to &quot;å¦‚ä½•æ‰“è¡¥ä¸&quot;">â€‹</a></h2><p>ä¸åŒçš„åŒ…ç®¡ç†å™¨ï¼Œæ‰“è¡¥ä¸çš„æ–¹æ³•ä¹Ÿä¸åŒï¼Œä½†å…¶åŸç†éƒ½æ˜¯ä¸€æ ·çš„</p><ol><li>åœ¨é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª <code>patches</code> æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜æ”¾ç€æ‰€æœ‰çš„è¡¥ä¸æ–‡ä»¶ï¼ˆå…¶è¡¥ä¸å†…å®¹ä¸º <code>diff</code> æ ¼å¼ï¼‰</li><li>åœ¨ <code>npm install</code> åè‡ªåŠ¨åº”ç”¨è¡¥ä¸</li></ol><h3 id="ä½¿ç”¨-pnpm-æˆ–-yarn-v2" tabindex="-1">ä½¿ç”¨ <code>pnpm</code> æˆ– <code>yarn v2+</code> <a class="header-anchor" href="#ä½¿ç”¨-pnpm-æˆ–-yarn-v2" aria-label="Permalink to &quot;ä½¿ç”¨ \`pnpm\` æˆ– \`yarn v2+\`&quot;">â€‹</a></h3><p><code>pnpm</code> å’Œ <code>yarn v2+</code> éƒ½æä¾›äº† <code>patch</code> å‘½ä»¤ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</p><p><strong>ä»¥ <code>pnpm</code> ä¸ºä¾‹</strong></p><p>æ·»åŠ è¡¥ä¸ï¼Œè¯¥å‘½ä»¤ä¼šå°†æŒ‡å®šçš„è½¯ä»¶åŒ…æå–åˆ°ä¸€ä¸ªå¯ä»¥éšæ„ç¼–è¾‘çš„ä¸´æ—¶ç›®å½•ä¸­ä¾›æˆ‘ä»¬ä¿®æ”¹</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">pnpm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">patch</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">pkg</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">@</span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">versio</span><span style="color:#E1E4E8;">n</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># ğŸŒ°</span></span>
<span class="line"><span style="color:#B392F0;">pnpm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">patch</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">@astrojs/cli-kit@0.2.3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">pnpm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">patch</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">pkg</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">@</span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">versio</span><span style="color:#24292E;">n</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># ğŸŒ°</span></span>
<span class="line"><span style="color:#6F42C1;">pnpm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">patch</span><span style="color:#24292E;"> </span><span style="color:#032F62;">@astrojs/cli-kit@0.2.3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç”Ÿæˆè¡¥ä¸æ–‡ä»¶åˆ°é¡¹ç›®ä¸­ï¼ˆé»˜è®¤ä¿å­˜åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>patches</code> ç›®å½•ä¸­ï¼‰</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># &lt;path&gt; æ˜¯ä¹‹å‰æå–çš„ä¸´æ—¶ç›®å½•</span></span>
<span class="line"><span style="color:#B392F0;">pnpm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">patch-commit</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">pat</span><span style="color:#E1E4E8;">h</span><span style="color:#F97583;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># &lt;path&gt; æ˜¯ä¹‹å‰æå–çš„ä¸´æ—¶ç›®å½•</span></span>
<span class="line"><span style="color:#6F42C1;">pnpm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">patch-commit</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">pat</span><span style="color:#24292E;">h</span><span style="color:#D73A49;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="ä½¿ç”¨-npm-æˆ–-yarn-v1-æ—¶" tabindex="-1">ä½¿ç”¨ <code>npm</code> æˆ– <code>yarn v1</code> æ—¶ <a class="header-anchor" href="#ä½¿ç”¨-npm-æˆ–-yarn-v1-æ—¶" aria-label="Permalink to &quot;ä½¿ç”¨ \`npm\` æˆ– \`yarn v1\` æ—¶&quot;">â€‹</a></h3><p>ä½¿ç”¨ <code>npm</code> æˆ– <code>yarn v1</code> ç®¡ç†ä¾èµ–æ—¶ï¼Œéœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹å·¥å…· <code>patch-package</code> æ¥å®ç°å¯¹ <code>node_modules</code> ä¸­çš„ä¾èµ–æ‰“è¡¥ä¸</p><p><strong>ä»¥ <code>npm</code> ä¸ºä¾‹</strong></p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 1. å®‰è£… patch-package</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">i</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-D</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">patch-package</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 2. æ·»åŠ  postinstall è„šæœ¬ï¼Œä»¥ä¾¿åœ¨æ¯æ¬¡ npm install åè‡ªåŠ¨åº”ç”¨è¡¥ä¸</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pkg</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">scripts.postinstall=&quot;patch-package&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 3. ä¿®æ”¹ node_modules æŒ‡å®šä¾èµ–åŒ…</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 4. ç”Ÿæˆè¡¥ä¸ &lt;pkg name&gt; æ˜¯ä¸Šä¸€æ­¥ä¿®æ”¹çš„ä¾èµ–åŒ…åç§°</span></span>
<span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">patch-package</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">pkg</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 1. å®‰è£… patch-package</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">i</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-D</span><span style="color:#24292E;"> </span><span style="color:#032F62;">patch-package</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 2. æ·»åŠ  postinstall è„šæœ¬ï¼Œä»¥ä¾¿åœ¨æ¯æ¬¡ npm install åè‡ªåŠ¨åº”ç”¨è¡¥ä¸</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pkg</span><span style="color:#24292E;"> </span><span style="color:#032F62;">set</span><span style="color:#24292E;"> </span><span style="color:#032F62;">scripts.postinstall=&quot;patch-package&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 3. ä¿®æ”¹ node_modules æŒ‡å®šä¾èµ–åŒ…</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 4. ç”Ÿæˆè¡¥ä¸ &lt;pkg name&gt; æ˜¯ä¸Šä¸€æ­¥ä¿®æ”¹çš„ä¾èµ–åŒ…åç§°</span></span>
<span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">patch-package</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">pkg</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="å‚è€ƒ" tabindex="-1">å‚è€ƒ <a class="header-anchor" href="#å‚è€ƒ" aria-label="Permalink to &quot;å‚è€ƒ&quot;">â€‹</a></h2><ul><li><a href="https://pnpm.io/zh/cli/patch" target="_blank" rel="noreferrer">pnpm patch &lt;pkg&gt; | pnpm</a></li><li><a href="https://github.com/ds300/patch-package" target="_blank" rel="noreferrer">patch-package | GitHub</a></li></ul>`,27),o=[e];function c(t,r,i,d,y,h){return a(),n("div",null,o)}const E=s(p,[["render",c]]);export{u as __pageData,E as default};
