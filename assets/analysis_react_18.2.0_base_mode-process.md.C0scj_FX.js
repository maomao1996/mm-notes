import{_ as e,h as s,a8 as a,o as r}from"./chunks/framework.BU7NHiAd.js";const d="/mm-notes/assets/legacy-process.C4TrQtcm.webp",n="/mm-notes/assets/concurrent-process.CgpXm23K.webp",u=JSON.parse('{"title":"å¯åŠ¨æ¨¡å¼å’Œæ¸²æŸ“æµç¨‹","description":"èŒ‚èŒ‚çš„ React v18.2.0 æºç é˜…è¯»ç¬”è®° â€”â€” å¯åŠ¨æ¨¡å¼å’Œæ¸²æŸ“æµç¨‹","frontmatter":{"description":"èŒ‚èŒ‚çš„ React v18.2.0 æºç é˜…è¯»ç¬”è®° â€”â€” å¯åŠ¨æ¨¡å¼å’Œæ¸²æŸ“æµç¨‹"},"headers":[],"relativePath":"analysis/react/18.2.0/base/mode-process.md","filePath":"analysis/react/18.2.0/base/mode-process.md","lastUpdated":1697968286000}'),i={name:"analysis/react/18.2.0/base/mode-process.md"};function o(c,t,l,h,p,g){return r(),s("div",null,t[0]||(t[0]=[a(`<h1 id="å¯åŠ¨æ¨¡å¼å’Œæ¸²æŸ“æµç¨‹" tabindex="-1">å¯åŠ¨æ¨¡å¼å’Œæ¸²æŸ“æµç¨‹ <a class="header-anchor" href="#å¯åŠ¨æ¨¡å¼å’Œæ¸²æŸ“æµç¨‹" aria-label="Permalink to &quot;å¯åŠ¨æ¨¡å¼å’Œæ¸²æŸ“æµç¨‹&quot;">â€‹</a></h1><h2 id="å¯åŠ¨æ¨¡å¼" tabindex="-1">å¯åŠ¨æ¨¡å¼ <a class="header-anchor" href="#å¯åŠ¨æ¨¡å¼" aria-label="Permalink to &quot;å¯åŠ¨æ¨¡å¼&quot;">â€‹</a></h2><p>åœ¨ React 18 ä¸­ï¼ŒReact åº”ç”¨æœ‰ä¸¤ç§å¯åŠ¨æ¨¡å¼ï¼š</p><ul><li><strong><code>legacy</code> æ¨¡å¼</strong>ï¼š<code>ReactDOM.render(&lt;App /&gt;, document.getElementById(&#39;root&#39;))</code> è¿™ä¸ªæ¨¡å¼å¯èƒ½ä¸æ”¯æŒ<a href="https://17.reactjs.org/docs/concurrent-mode-patterns.html#the-three-steps" target="_blank" rel="noreferrer">è¿™äº›æ–°åŠŸèƒ½(concurrent æ”¯æŒçš„æ‰€æœ‰åŠŸèƒ½)</a></li><li><strong><code>concurrent</code> æ¨¡å¼</strong>ï¼š<code>ReactDOM.createRoot(rootNode).render(&lt;App /&gt;)</code> è¿™ä¸ªæ¨¡å¼å¼€å¯äº†æ‰€æœ‰çš„æ–°åŠŸèƒ½ï¼ˆæ˜¯ React 18 çš„é»˜è®¤æ¨¡å¼ï¼‰</li></ul><div class="tip custom-block"><p class="custom-block-title"><code>blocking</code> æ¨¡å¼</p><p>åœ¨ React 17 ä¸­ï¼Œè¿˜æœ‰ä¸€ç§ <strong><code>blocking</code> æ¨¡å¼</strong>ï¼Œå®ƒæ˜¯å¼€å¯éƒ¨åˆ† <code>concurrent</code> æ¨¡å¼ç‰¹æ€§çš„ä¸­é—´æ¨¡å¼ï¼Œæ˜¯ä½œä¸ºè¿ç§»åˆ° <strong><code>concurrent</code> æ¨¡å¼</strong>çš„ç¬¬ä¸€ä¸ªæ­¥éª¤</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ReactDOM.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createBlockingRoot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rootNode).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">App</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>è¿™ä¸ªæ¨¡å¼ React 18 ä¸­å·²ç»è¢«ç§»é™¤</p></blockquote><p><a href="https://17.reactjs.org/docs/concurrent-mode-adoption.html#migration-step-blocking-mode" target="_blank" rel="noreferrer">Blocking Mode</a></p></div><h3 id="å„ç§æ¨¡å¼å¯¹ç‰¹æ€§çš„æ”¯æŒ" tabindex="-1">å„ç§æ¨¡å¼å¯¹ç‰¹æ€§çš„æ”¯æŒ <a class="header-anchor" href="#å„ç§æ¨¡å¼å¯¹ç‰¹æ€§çš„æ”¯æŒ" aria-label="Permalink to &quot;å„ç§æ¨¡å¼å¯¹ç‰¹æ€§çš„æ”¯æŒ&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th></th><th>legacy æ¨¡å¼</th><th>blocking æ¨¡å¼</th><th>concurrent æ¨¡å¼</th></tr></thead><tbody><tr><td><a href="https://zh-hans.reactjs.org/docs/refs-and-the-dom.html#legacy-api-string-refs" target="_blank" rel="noreferrer">String Refs</a></td><td>âœ…</td><td>ğŸš«**</td><td>ğŸš«**</td></tr><tr><td><a href="https://zh-hans.reactjs.org/docs/legacy-context.html" target="_blank" rel="noreferrer">Legacy Context</a></td><td>âœ…</td><td>ğŸš«**</td><td>ğŸš«**</td></tr><tr><td><a href="https://zh-hans.reactjs.org/docs/strict-mode.html#warning-about-deprecated-finddomnode-usage" target="_blank" rel="noreferrer">findDOMNode</a></td><td>âœ…</td><td>ğŸš«**</td><td>ğŸš«**</td></tr><tr><td><a href="https://zh-hans.reactjs.org/docs/concurrent-mode-suspense.html#what-is-suspense-exactly" target="_blank" rel="noreferrer">Suspense</a></td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td><a href="https://zh-hans.reactjs.org/docs/concurrent-mode-patterns.html#suspenselist" target="_blank" rel="noreferrer">SuspenseList</a></td><td>ğŸš«</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Suspense SSR + Hydration</td><td>ğŸš«</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Progressive Hydration</td><td>ğŸš«</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Selective Hydration</td><td>ğŸš«</td><td>ğŸš«</td><td>âœ…</td></tr><tr><td>Cooperative Multitasking</td><td>ğŸš«</td><td>ğŸš«</td><td>âœ…</td></tr><tr><td>Automatic batching of multiple setStates</td><td>ğŸš«*</td><td>âœ…</td><td>âœ…</td></tr><tr><td><a href="https://zh-hans.reactjs.org/docs/concurrent-mode-patterns.html#splitting-high-and-low-priority-state" target="_blank" rel="noreferrer">Priority-based Rendering</a></td><td>ğŸš«</td><td>ğŸš«</td><td>âœ…</td></tr><tr><td><a href="https://zh-hans.reactjs.org/docs/concurrent-mode-intro.html#interruptible-rendering" target="_blank" rel="noreferrer">Interruptible Prerendering</a></td><td>ğŸš«</td><td>ğŸš«</td><td>âœ…</td></tr><tr><td><a href="https://zh-hans.reactjs.org/docs/concurrent-mode-patterns.html#transitions" target="_blank" rel="noreferrer">useTransition</a></td><td>ğŸš«</td><td>ğŸš«</td><td>âœ…</td></tr><tr><td><a href="https://zh-hans.reactjs.org/docs/concurrent-mode-patterns.html#deferring-a-value" target="_blank" rel="noreferrer">useDeferredValue</a></td><td>ğŸš«</td><td>ğŸš«</td><td>âœ…</td></tr><tr><td><a href="https://zh-hans.reactjs.org/docs/concurrent-mode-patterns.html#suspense-reveal-train" target="_blank" rel="noreferrer">Suspense Reveal &quot;Train&quot;</a></td><td>ğŸš«</td><td>ğŸš«</td><td>âœ…</td></tr></tbody></table><p>*<code>ï¼šlegacy</code> æ¨¡å¼åœ¨åˆæˆäº‹ä»¶ä¸­æœ‰è‡ªåŠ¨æ‰¹å¤„ç†çš„åŠŸèƒ½ï¼Œä½†ä»…é™äºä¸€ä¸ªæµè§ˆå™¨ä»»åŠ¡ã€‚é React äº‹ä»¶æƒ³ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½å¿…é¡»ä½¿ç”¨ <code>unstable_batchedUpdates</code>ã€‚åœ¨ <code>blocking</code> æ¨¡å¼å’Œ <code>concurrent</code> æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„ <code>setState</code> åœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯æ‰¹å¤„ç†çš„</p><p>**ï¼šä¼šåœ¨å¼€å‘ä¸­å‘å‡ºè­¦å‘Š</p><hr><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>React é€šè¿‡ä¸åŒçš„<strong>å…¥å£å‡½æ•°</strong>å¼€å¯ä¸åŒæ¨¡å¼ï¼Œä¸”æ¨¡å¼çš„å˜åŒ–å½±å“çš„æ˜¯æ•´ä¸ªåº”ç”¨çš„å·¥ä½œæ–¹å¼ï¼Œæ‰€ä»¥æ— æ³•åªé’ˆå¯¹æŸä¸ªç»„ä»¶å¼€å¯ä¸åŒæ¨¡å¼</li><li>è¿™å‡ ç§æ¨¡å¼ä¸‹çš„ <code>fiber.mode</code> çš„å€¼æœ‰æ‰€ä¸åŒ</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RootTag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> LegacyRoot</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ConcurrentRoot</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div><h2 id="æ¸²æŸ“æµç¨‹" tabindex="-1">æ¸²æŸ“æµç¨‹ <a class="header-anchor" href="#æ¸²æŸ“æµç¨‹" aria-label="Permalink to &quot;æ¸²æŸ“æµç¨‹&quot;">â€‹</a></h2><p>React åº”ç”¨ç¨‹åºçš„æ¸²æŸ“æµç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p><ul><li>åˆå§‹åŒ–é˜¶æ®µ</li><li><code>render</code> é˜¶æ®µï¼šå³ Reconciler å·¥ä½œçš„é˜¶æ®µï¼Œ<code>render</code> é˜¶æ®µä¼šè°ƒç”¨ç»„ä»¶çš„ <code>render</code> æ–¹æ³•è·å–ç»„ä»¶çš„ <code>React Element</code>ï¼Œå¹¶æ„å»º <code>Fiber</code> æ ‘</li><li><code>commit</code> é˜¶æ®µï¼šå³ Renderer å·¥ä½œçš„é˜¶æ®µï¼Œ<code>commit</code> é˜¶æ®µä¼šæŠŠ <code>render</code> é˜¶æ®µæäº¤çš„ä¿¡æ¯æ¸²æŸ“åœ¨é¡µé¢ä¸Š</li></ul><p><code>render</code> ä¸ <code>commit</code> é˜¶æ®µç»Ÿç§°ä¸º <code>work</code>ï¼Œå³ React åœ¨å·¥ä½œä¸­ã€‚å¦‚æœä»»åŠ¡æ­£åœ¨ Scheduler å†…è°ƒåº¦å°±ä¸å±äº <code>work</code> é˜¶æ®µ</p><h3 id="legacy-æ¨¡å¼çš„è°ƒç”¨æ ˆ" tabindex="-1">legacy æ¨¡å¼çš„è°ƒç”¨æ ˆ <a class="header-anchor" href="#legacy-æ¨¡å¼çš„è°ƒç”¨æ ˆ" aria-label="Permalink to &quot;legacy æ¨¡å¼çš„è°ƒç”¨æ ˆ&quot;">â€‹</a></h3><p><img src="`+d+'" alt="legacy-process" loading="lazy"></p><h3 id="concurrent-æ¨¡å¼çš„è°ƒç”¨æ ˆ" tabindex="-1">concurrent æ¨¡å¼çš„è°ƒç”¨æ ˆ <a class="header-anchor" href="#concurrent-æ¨¡å¼çš„è°ƒç”¨æ ˆ" aria-label="Permalink to &quot;concurrent æ¨¡å¼çš„è°ƒç”¨æ ˆ&quot;">â€‹</a></h3><p><img src="'+n+'" alt="concurrent-process" loading="lazy"></p>',19)]))}const m=e(i,[["render",o]]);export{u as __pageData,m as default};
